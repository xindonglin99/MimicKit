env_name: "deepmimic"

env:
    char_file: "data/assets/hightorque/pi_plus/pi_plus_22dof.xml"
    camera_mode: "track"

    episode_length: 10.0 # seconds
    global_obs: True
    root_height_obs: True
    pose_termination: True
    pose_termination_dist: 0.7 # m
    enable_phase_obs: False
    enable_tar_obs: True
    num_phase_encoding: 4
    tar_obs_steps: [1, 2, 3]
    rand_reset: True
    zero_center_action: True

    ref_char_offset: [2.0, 0.0, 0.0] # m
    init_pose: [0, 0, 0.4, 0, 0, 0, -0.25, 0, 0, 0.65, -0.4, 0, 0, 0, 0, 0, 0, -0.25, 0, 0, 0.65, -0.4, 0, 0, 0, 0, 0, 0] # 6+22=28, not important since RSI is used

    enable_early_termination: True
    termination_height: 0.25 # from beyondmimic 0.25m
    key_bodies: ["l_ankle_roll_link", "r_ankle_roll_link", "l_wrist_link", "r_wrist_link"] # try without head
    contact_bodies: ["l_calf_link", "l_ankle_pitch_link", "l_ankle_roll_link", "r_calf_link", "r_ankle_pitch_link", "r_ankle_roll_link"] # Try
    #contact_bodies: ["left_knee_link", "left_ankle_pitch_link", "left_ankle_roll_link", "right_knee_link", "right_ankle_pitch_link", "right_ankle_roll_link", "left_elbow_link", "left_wrist_roll_link", "left_wrist_pitch_link", "left_wrist_yaw_link", "right_elbow_link", "right_wrist_roll_link", "right_wrist_pitch_link", "right_wrist_yaw_link"] # cartwheel
    log_tracking_error: False # For debugging now

    motion_file: "data/motions/hightorque/pi_plus/mimickit/walk1_subject1_mimickit_60_300.pkl"

    joint_err_w: [1.0, 1.0, 1.0, 0.6, 0.5, 0.5, 1.0, 1.0, 1.0, 0.6, 0.5, 1.0, 1.0, 1.0, 0.6, 0.5, 0.5, 1.0, 1.0, 1.0, 0.6, 0.5] # for joints, hips 1.0, shoulders 1.0, elbows 0.6, wrists 0.5, knees 0.6, ankles 0.5
    
    # Seems not need to tune for now
    reward_pose_w: 0.5
    reward_vel_w: 0.1
    reward_root_pose_w: 0.15
    reward_root_vel_w: 0.1
    reward_key_pos_w: 0.15

    reward_pose_scale: 0.25
    reward_vel_scale: 0.01
    reward_root_pose_scale: 5.0
    reward_root_vel_scale: 1.0
    reward_key_pos_scale: 10.0


engine:
    engine_name: "isaac_gym"
    
    control_mode: "pos"
    sim_freq: 60
    control_freq: 30
    env_spacing: 5
    
    plane:
        static_friction: 1.0
        dynamic_friction: 1.0
        restitution: 0.0
    
    sim:
        substeps: 2 # 120 Hz
        physx:
            num_threads: 4
            solver_type: 1  # 0: pgs, 1: tgs
            num_position_iterations: 4
            num_velocity_iterations: 0
            contact_offset: 0.02
            rest_offset: 0.0
            bounce_threshold_velocity: 0.2
            max_depenetration_velocity: 10.0
            default_buffer_size_multiplier: 10.0

        flex:
            num_inner_iterations: 10
            warm_start: 0.25


